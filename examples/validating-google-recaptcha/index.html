<!doctype html>
<html>
<head>
    <meta charset="utf-8">
<title>Validating Google reCAPTCHA - FormValidation</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="BootstrapValidator, a jQuery plugin to validate form fields">
<meta name="keywords" content="Bootstrap, jQuery, validate, plugin, validator, form">
<meta name="author" content="Nguyen Huu Phuoc">
<meta name="google-site-verification" content="uzi08FxE8yqb9q-PlBzFxZeuUGalNFp3gX2haopVWBc" />

<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
<link rel="stylesheet" href="//oss.maxcdn.com/jquery.bootstrapvalidator/0.5.2/css/bootstrapValidator.min.css">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lato:300,400,700">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Cardo:400,400italic,700">
<link rel="stylesheet" href="/vendor/pygments/github.css">
<link rel="stylesheet" href="/asset/css/style.css">

<!--[if lt IE 9]>
<script src="//oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="//oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<script src="//oss.maxcdn.com/jquery/1.11.1/jquery.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script src="//oss.maxcdn.com/jquery.bootstrapvalidator/0.5.3/js/bootstrapValidator.min.js"></script>

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-44786951-2']);
_gaq.push(['_trackPageview']);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

</head>
<body>
    <nav class="doc-nav" tabindex="-1">
    <ul>
        <li><a href="/">Home</a></li>
    
        
            
        
        <li class=""><a href="/download/">Download</a></li>
    
        
            
        
        <li class=""><a href="/getting-started/">Getting Started</a></li>
    
        
            
        
        <li class=""><a href="/settings/">Settings</a></li>
    
        
            
        
        <li class=""><a href="/validators/">Validators</a></li>
    
        
            
        
        <li class=""><a href="/api/">API</a></li>
    
        
            
        
        <li class="doc-nav-active"><a href="/examples/">Examples</a></li>
    
        
            
        
        <li class=""><a href="/developing/">Developing</a></li>
    
        
            
        
        <li class=""><a href="/news/">News</a></li>
    
        
            
        
        <li class=""><a href="/license/">License</a></li>
    
    </ul>

    <div class="doc-hr"></div>

    <ul>
        <li><a href="https://github.com/formvalidation/formvalidation" title="Fork me on Github">Github <i class="fa fa-github"></i></a></li>
        <li><a href="http://twitter.com/formvalidation/" title="Follow me on Twitter">formvalidation <i class="fa fa-twitter"></i></a></li>
        <li><a href="https://www.facebook.com/pages/FormValidation/1567908420106565/" title="Like me on Facebook">FormValidation <i class="fa fa-facebook"></i></a></li>
        <li><a href="https://plus.google.com/u/0/communities/114931136856987817254" title="Join me on Google+">Google+ community <i class="fa fa-google-plus"></i></a></li>
    </ul>

    <div class="doc-hr"></div>

    <div class="doc-creator">
        <p>
            Handcrafted with <span class="doc-heart"><i class="fa fa-heart"></i></span> and a lot of <i class="fa fa-coffee"></i><br />
            by <a href="http://twitter.com/nghuuphuoc">@nghuuphuoc</a><br/>
            <img src="http://github.com/nghuuphuoc.png" />
        </p>
        <p><a href="mailto: phuoc@huuphuoc.me" class="btn">Hire me</a></p>
    </div>
</nav>
<button class="btn doc-logo" title="Toggle the navigation"><i class="fa fa-bars"></i></button>

    <div id="main" class="doc-content-wrapper">
        <div class="doc-notification">
    <i class="fa fa-bell-o"></i> <a href="/news/v0.5.3-released/">v0.5.3</a> is released on 2014.11.05!
</div>

        <div class="doc-content-container">
    <div class="doc-heading">
        <h1>Validating Google reCAPTCHA</h1>
        <p>&larr; <a href="/examples/">Examples</a></p>
        <a class="btn doc-edit-btn" href="https://github.com/formvalidation/formvalidation.io/edit/docs/examples/validating-google-recaptcha.html">Improve it on Github</a>
        <div id="shareButton" class="doc-share-button"></div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <p>This example is a step by step instruction on how to use a <a href="/validators/remote/">remote</a> validator to verify a <a href="https://www.google.com/recaptcha/">Google reCAPTCHA</a>.</p>

                <div class="doc-hr"></div>

                <section>
                    <h2>Registry keys</h2>
                    <p>You need to register a public and private keys provided at <a href="https://www.google.com/recaptcha/admin">Get reCAPTCHA</a> page.</p>
                </section>

                <div class="doc-hr"></div>

                <section>
                    <h2>Showing the captcha</h2>
                    <p>Assume that the captcha will be placed inside an element with id of <code>recaptcha</code> as following:</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">&quot;defaultForm&quot;</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span> <span class="na">class=</span><span class="s">&quot;form-horizontal&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">&quot;col-sm-3 control-label&quot;</span><span class="nt">&gt;</span>Captcha<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-9 captchaContainer&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;recaptcha&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/form&gt;</span></code></pre></div>

                    <p>Google reCAPTCHA allows using either Non-Javascript or Ajax API to show up the recaptcha image. In this example, we will use the <a href="https://developers.google.com/recaptcha/docs/display#AJAX">reCAPTCHA Ajax API</a>.</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- The reCAPTCHA Ajax script --&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://www.google.com/recaptcha/api/js/recaptcha_ajax.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Call the BootstrapValidator plugin</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#defaultForm&#39;</span><span class="p">).</span><span class="nx">bootstrapValidator</span><span class="p">({</span>
        <span class="nx">feedbackIcons</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">valid</span><span class="o">:</span> <span class="s1">&#39;glyphicon glyphicon-ok&#39;</span><span class="p">,</span>
            <span class="nx">invalid</span><span class="o">:</span> <span class="s1">&#39;glyphicon glyphicon-remove&#39;</span><span class="p">,</span>
            <span class="nx">validating</span><span class="o">:</span> <span class="s1">&#39;glyphicon glyphicon-refresh&#39;</span>
        <span class="p">}</span>
        <span class="c1">// You can define other settings and other fields on form here</span>
    <span class="p">});</span>

    <span class="c1">// Replace &#39;PUBLIC_KEY&#39; with your public key</span>
    <span class="c1">// The second parameter &#39;recaptcha&#39; is the Id of element showing up the captcha image</span>
    <span class="nx">Recaptcha</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">&#39;PUBLIC_KEY&#39;</span><span class="p">,</span> <span class="s1">&#39;recaptcha&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">theme</span><span class="o">:</span> <span class="s1">&#39;white&#39;</span>
    <span class="p">});</span>
<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span></code></pre></div>

                    <p>reCAPTCHA then creates a text box with name of <code>recaptcha_response_field</code>. We use the <a href="/api/#add-field">addField()</a> method to add this field:</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#defaultForm&#39;</span><span class="p">).</span><span class="nx">bootstrapValidator</span><span class="p">(...);</span>

    <span class="nx">Recaptcha</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">&#39;PUBLIC_KEY&#39;</span><span class="p">,</span> <span class="s1">&#39;recaptcha&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">theme</span><span class="o">:</span> <span class="s1">&#39;white&#39;</span><span class="p">,</span>
        <span class="c1">// captchaLoaded function will be called after the captcha image is loaded</span>
        <span class="nx">callback</span><span class="o">:</span> <span class="nx">captchaLoaded</span>
    <span class="p">});</span>

    <span class="kd">function</span> <span class="nx">captchaLoaded</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Add new field after loading captcha</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#defaultForm&#39;</span><span class="p">).</span><span class="nx">bootstrapValidator</span><span class="p">(</span><span class="s1">&#39;addField&#39;</span><span class="p">,</span> <span class="s1">&#39;recaptcha_response_field&#39;</span><span class="p">,</span> <span class="p">{</span>
            <span class="nx">validators</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">notEmpty</span><span class="o">:</span> <span class="p">{</span>
                    <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;The captcha is required and can\&#39;t be empty&#39;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">};</span>
<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span></code></pre></div>

                    <p>At the moment, the captcha field uses only <a href="/validators/notEmpty/">notEmpty</a> validator indicating that the field is required. We will use the <a href="/validators/remote/">remote</a> validator to verify it in the next step.</p>

                    <p>Currently, if you leave the captcha empty and submit the form, the field will be masked as invalid. But the element showing captcha seem to be shown not properly, because the feedback icon is placed right after the field:</p>
                    <p class="text-center">
                        <img src="/asset/img/example/validating-google-recaptcha/icon-position-before.png" alt="Feedback icon position" />
                    </p>

                    <p>In order to fix this, we need to move the feedback icon right after the <code>recaptcha</code> element. It can be done by triggering the <a href="/settings/#event-form">added.field.bv</a> event, which is called after adding a field:</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">...</span>

    <span class="kd">function</span> <span class="nx">captchaLoaded</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#defaultForm&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;added.field.bv&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// The field &quot;recaptcha_response_field&quot; has just been added</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">field</span> <span class="o">===</span> <span class="s1">&#39;recaptcha_response_field&#39;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">// Find the icon</span>
                    <span class="kd">var</span> <span class="nx">$parent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">parents</span><span class="p">(</span><span class="s1">&#39;.form-group&#39;</span><span class="p">),</span>
                        <span class="nx">$icon</span>   <span class="o">=</span> <span class="nx">$parent</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.form-control-feedback[data-bv-icon-for=&quot;&#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">field</span> <span class="o">+</span> <span class="s1">&#39;&quot;]&#39;</span><span class="p">);</span>

                    <span class="c1">// Move icon to other position</span>
                    <span class="nx">$icon</span><span class="p">.</span><span class="nx">insertAfter</span><span class="p">(</span><span class="s1">&#39;#recaptcha&#39;</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="nx">bootstrapValidator</span><span class="p">(</span><span class="s1">&#39;addField&#39;</span><span class="p">,</span> <span class="s1">&#39;recaptcha_response_field&#39;</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">validators</span><span class="o">:</span> <span class="p">{</span>
                    <span class="nx">notEmpty</span><span class="o">:</span> <span class="p">{</span>
                        <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;The captcha is required and can\&#39;t be empty&#39;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">});</span>
    <span class="p">};</span>
<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span></code></pre></div>

                    <p>Now, try to submit the form, and you will see that the feedback icon is shown at the desired position:</p>
                    <p class="text-center">
                        <img src="/asset/img/example/validating-google-recaptcha/icon-position-after.png" alt="Feedback icon position" />
                    </p>
                </section>

                <div class="doc-hr"></div>

                <section>
                    <h2>Verifying the captcha</h2>

                    <p>The last step is to validate the captcha using the <a href="/validators/remote/">remote</a> validator. Google reCAPTCHA requires the value of <code>recaptcha_response_field</code> and <code>recaptcha_challenge_field</code> fields. The last one is a hidden field generated by Google reCAPTCHA.</p>
                    <p>So, we need to send these fields to our back-end:</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">...</span>

    <span class="kd">function</span> <span class="nx">captchaLoaded</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#defaultForm&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;added.field.bv&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="p">...</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="nx">bootstrapValidator</span><span class="p">(</span><span class="s1">&#39;addField&#39;</span><span class="p">,</span> <span class="s1">&#39;recaptcha_response_field&#39;</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">validators</span><span class="o">:</span> <span class="p">{</span>
                    <span class="nx">notEmpty</span><span class="o">:</span> <span class="p">{</span>
                        <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;The captcha is required and can\&#39;t be empty&#39;</span>
                    <span class="p">},</span>
                    <span class="nx">remote</span><span class="o">:</span> <span class="p">{</span>
                        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
                        <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;recaptcha.php&#39;</span><span class="p">,</span>
                        <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;The captcha is not valid&#39;</span><span class="p">,</span>
                        <span class="nx">data</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                            <span class="c1">// We also need to send the challenge field value</span>
                            <span class="k">return</span> <span class="p">{</span>
                                <span class="nx">recaptcha_challenge_field</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#defaultForm&#39;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;[name=&quot;recaptcha_challenge_field&quot;]&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                            <span class="p">};</span>
                        <span class="p">},</span>
                        <span class="nx">delay</span><span class="o">:</span> <span class="mi">1000</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">});</span>
    <span class="p">};</span>
<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span></code></pre></div>

                    <p>Google reCAPTCHA provides many libraries in different languages to help us verify the captcha based on <code>recaptcha_response_field</code> and <code>recaptcha_challenge_field</code> values.</p>
                    <p>To simply demonstrate the back-end verifying process, I use the <a href="https://developers.google.com/recaptcha/docs/php">reCAPTCHA PHP library</a> which can be downloaded <a href="http://code.google.com/p/recaptcha/downloads/list?q=label:phplib-Latest">here</a>.</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>
<span class="c1">// Register the public and private keys at https://www.google.com/recaptcha/admin</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;PUBLIC_KEY&#39;</span><span class="p">,</span>  <span class="s1">&#39;...&#39;</span><span class="p">);</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">&#39;PRIVATE_KEY&#39;</span><span class="p">,</span> <span class="s1">&#39;...&#39;</span><span class="p">);</span>

<span class="c1">// Download the PHP library</span>
<span class="c1">// https://developers.google.com/recaptcha/docs/php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">&#39;recaptchalib.php&#39;</span><span class="p">);</span>

<span class="c1">// Verify the captcha</span>
<span class="c1">// https://developers.google.com/recaptcha/docs/verify</span>
<span class="nv">$resp</span> <span class="o">=</span> <span class="nx">recaptcha_check_answer</span><span class="p">(</span><span class="nx">PRIVATE_KEY</span><span class="p">,</span>
                                <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;REMOTE_ADDR&#39;</span><span class="p">],</span>
                                <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;recaptcha_challenge_field&#39;</span><span class="p">],</span>
                                <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;recaptcha_response_field&#39;</span><span class="p">]</span>
                            <span class="p">);</span>

<span class="k">echo</span> <span class="nb">json_encode</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;valid&#39;</span> <span class="o">=&gt;</span> <span class="nv">$resp</span><span class="o">-&gt;</span><span class="na">is_valid</span><span class="p">,</span>
<span class="p">));</span></code></pre></div>

                    <p>Of course, you can use your own solution to verify the captcha as long as the back-end need to return an encoded JSON containing the <code>valid</code> key.</p>
                </section>

                <div class="doc-hr"></div>

                <section>
                    <h2>Final code</h2>

                    <div class="doc-demo">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#recaptcha-html-tab" data-toggle="tab">HTML</a></li>
                            <li><a href="#recaptcha-js-tab" data-toggle="tab">JS</a></li>
                            <li><a href="#recaptcha-backend-tab" data-toggle="tab">Back-end</a></li>
                        </ul>

                        <div class="tab-content">
                            <div class="tab-pane active" id="recaptcha-html-tab">
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">&quot;defaultForm&quot;</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span> <span class="na">class=</span><span class="s">&quot;form-horizontal&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">&quot;col-sm-3 control-label&quot;</span><span class="nt">&gt;</span>Captcha<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-9 captchaContainer&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;recaptcha&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://www.google.com/recaptcha/api/js/recaptcha_ajax.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span></code></pre></div>
                            </div>

                            <div class="tab-pane" id="recaptcha-js-tab">
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#defaultForm&#39;</span><span class="p">).</span><span class="nx">bootstrapValidator</span><span class="p">({</span>
        <span class="nx">feedbackIcons</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">valid</span><span class="o">:</span> <span class="s1">&#39;glyphicon glyphicon-ok&#39;</span><span class="p">,</span>
            <span class="nx">invalid</span><span class="o">:</span> <span class="s1">&#39;glyphicon glyphicon-remove&#39;</span><span class="p">,</span>
            <span class="nx">validating</span><span class="o">:</span> <span class="s1">&#39;glyphicon glyphicon-refresh&#39;</span>
        <span class="p">}</span>
    <span class="p">});</span>

    <span class="c1">// Replace &#39;PUBLIC_KEY&#39; with your public key</span>
    <span class="nx">Recaptcha</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">&#39;PUBLIC_KEY&#39;</span><span class="p">,</span> <span class="s1">&#39;recaptcha&#39;</span><span class="p">,</span> <span class="p">{</span>
         <span class="nx">theme</span><span class="o">:</span> <span class="s1">&#39;white&#39;</span><span class="p">,</span>
         <span class="nx">callback</span><span class="o">:</span> <span class="nx">captchaLoaded</span>
    <span class="p">});</span>

    <span class="kd">function</span> <span class="nx">captchaLoaded</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#defaultForm&#39;</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;added.field.bv&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// The field &#39;recaptcha_response_field&#39; has just been added</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">field</span> <span class="o">===</span> <span class="s1">&#39;recaptcha_response_field&#39;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">// Find the icon</span>
                    <span class="kd">var</span> <span class="nx">$parent</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">parents</span><span class="p">(</span><span class="s1">&#39;.form-group&#39;</span><span class="p">),</span>
                        <span class="nx">$icon</span>   <span class="o">=</span> <span class="nx">$parent</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.form-control-feedback[data-bv-icon-for=&quot;&#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">field</span> <span class="o">+</span> <span class="s1">&#39;&quot;]&#39;</span><span class="p">);</span>

                    <span class="c1">// Move icon to other position</span>
                    <span class="nx">$icon</span><span class="p">.</span><span class="nx">insertAfter</span><span class="p">(</span><span class="s1">&#39;#recaptcha&#39;</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">})</span>
            <span class="c1">// Add new field after loading captcha</span>
            <span class="p">.</span><span class="nx">bootstrapValidator</span><span class="p">(</span><span class="s1">&#39;addField&#39;</span><span class="p">,</span> <span class="s1">&#39;recaptcha_response_field&#39;</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">validators</span><span class="o">:</span> <span class="p">{</span>
                    <span class="nx">notEmpty</span><span class="o">:</span> <span class="p">{</span>
                        <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;The captcha is required and can\&#39;t be empty&#39;</span>
                    <span class="p">},</span>
                    <span class="nx">remote</span><span class="o">:</span> <span class="p">{</span>
                        <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
                        <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;recaptcha.php&#39;</span><span class="p">,</span>
                        <span class="nx">message</span><span class="o">:</span> <span class="s1">&#39;The captcha is not valid&#39;</span><span class="p">,</span>
                        <span class="nx">data</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                            <span class="k">return</span> <span class="p">{</span>
                                <span class="nx">recaptcha_challenge_field</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#defaultForm&#39;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;[name=&quot;recaptcha_challenge_field&quot;]&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
                            <span class="p">};</span>
                        <span class="p">},</span>
                        <span class="nx">delay</span><span class="o">:</span> <span class="mi">1000</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">});</span>
    <span class="p">};</span>
<span class="p">});</span></code></pre></div>
                            </div>

                            <div class="tab-pane" id="recaptcha-backend-tab">
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// recaptcha.php</span>

<span class="c1">// Register the public and private keys at https://www.google.com/recaptcha/admin</span>
<span class="nx">define</span><span class="p">(</span><span class="s1">&#39;PUBLIC_KEY&#39;</span><span class="p">,</span>  <span class="s1">&#39;...&#39;</span><span class="p">);</span>
<span class="nx">define</span><span class="p">(</span><span class="s1">&#39;PRIVATE_KEY&#39;</span><span class="p">,</span> <span class="s1">&#39;...&#39;</span><span class="p">);</span>

<span class="c1">// Download the PHP library</span>
<span class="c1">// https://developers.google.com/recaptcha/docs/php</span>
<span class="nx">require_once</span><span class="p">(</span><span class="s1">&#39;recaptchalib.php&#39;</span><span class="p">);</span>

<span class="c1">// Verify the captcha</span>
<span class="c1">// https://developers.google.com/recaptcha/docs/verify</span>
<span class="nx">$resp</span> <span class="o">=</span> <span class="nx">recaptcha_check_answer</span><span class="p">(</span><span class="nx">PRIVATE_KEY</span><span class="p">,</span>
                                <span class="nx">$_SERVER</span><span class="p">[</span><span class="s1">&#39;REMOTE_ADDR&#39;</span><span class="p">],</span>
                                <span class="nx">$_POST</span><span class="p">[</span><span class="s1">&#39;recaptcha_challenge_field&#39;</span><span class="p">],</span>
                                <span class="nx">$_POST</span><span class="p">[</span><span class="s1">&#39;recaptcha_response_field&#39;</span><span class="p">]</span>
                            <span class="p">);</span>

<span class="nx">echo</span> <span class="nx">json_encode</span><span class="p">(</span><span class="nx">array</span><span class="p">(</span>
    <span class="s1">&#39;valid&#39;</span> <span class="o">=&gt;</span> <span class="nx">$resp</span><span class="o">-&gt;</span><span class="nx">is_valid</span><span class="p">,</span>
<span class="p">));</span></code></pre></div>
                            </div>
                        </div>
                    </div>

                    <p>The following image shows how the field looks like when the captcha is valid:</p>
                    <p class="text-center">
                        <img src="/asset/img/example/validating-google-recaptcha/valid.png" alt="Valid recaptcha" />
                    </p>
                </section>
            </div>
        </div>
    </div>
</div>

        <footer class="doc-footer">
    <div class="container">
        <p>
            
            <a class="btn" href="/download/">Download</a>
            
            <a class="btn" href="https://github.com/formvalidation/formvalidation/issues">Report bug</a>
        </p>
        <p>
            &copy; 2013 - 2014 <a href="http://twitter.com/nghuuphuoc">Nguyen Huu Phuoc</a>. All rights reserved.<br/>
            Handcrafted with <span class="doc-heart"><i class="fa fa-heart"></i></span> and a lot of <i class="fa fa-coffee"></i>
        </p>
        <ul>
            <li><a href="/getting-started/">Getting started</a></li>
            <li>&middot;</li>
            <li><a href="/settings/">Settings</a></li>
            <li>&middot;</li>
            <li><a href="/validators/">Validators</a></li>
            <li>&middot;</li>
            <li><a href="/api/">API</a></li>
            <li>&middot;</li>
            <li><a href="/examples/">Examples</a></li>
            <li>&middot;</li>
            <li><a href="/developing/">Developing</a></li>
            <li>&middot;</li>
            <li><a href="/news/">News</a></li>
            <li>&middot;</li>
            <li><a href="/license/">License</a></li>
        </ul>
        <ul>
            <li>
                <a href="https://github.com/formvalidation/formvalidation" title="Fork me on Github">
                    <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-github-alt fa-stack-1x fa-inverse"></i>
                    </span>
                </a>
            </li>
            <li>
                <a href="http://twitter.com/formvalidation/" title="Follow me on Twitter">
                    <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                    </span>
                </a>
            </li>
            <li>
                <a href="https://www.facebook.com/pages/FormValidation/1567908420106565/" title="Like me on Facebook">
                    <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                    </span>
                </a>
            </li>
            <li>
                <a href="https://plus.google.com/u/0/communities/114931136856987817254" title="Join me on Google+">
                    <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-google-plus fa-stack-1x fa-inverse"></i>
                    </span>
                </a>
            </li>
        </ul>
    </div>

    
    <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=bootstrapvalidatorcom" id="_carbonads_js"></script>
    
</footer>
    </div>

<script src="/vendor/tocjs/js/toc.min.js"></script>
<script src="/vendor/share/share.min.js"></script>
<script>
$(function() {
    // Create share button
    new Share('#shareButton');

    $('[data-toggle="tooltip"]').tooltip();

    $('.doc-logo').on('click', function() {
        $('body').toggleClass('doc-nav-shown');
    });

    $('form').each(function() {
        $(this).on('success.form.bv', function(e) {
            e.preventDefault();
        });
    });

    // Create table of contents
    if ($('#toc').length) {
        $('#toc')
            .css('max-width', $('#toc').width())
            .toc({
                selector: '#main h2, #main h3, #main h4, #main h5, #main h6',
                elementClass: 'toc',
                ulClass: 'nav',
                indexingFormats: '______'
            });

        var $window = $(window),
            $body   = $(document.body);
        $body.scrollspy({
            target: '#toc'
        });

        $window.on('load', function() {
            $body.scrollspy('refresh');
        });

        setTimeout(function() {
            var $sideBar = $('#toc');
            $sideBar.affix({
                offset: {
                    top: function() {
                        return (this.top = $sideBar.offset().top);
                    }
                }
            });
        }, 100);
    }
});
</script>
</body>
</html>