<!doctype html>
<html>
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article#">
    <meta charset="utf-8">
<title>Validating percentage values - FormValidation</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<meta http-equiv="Content-Language" content="en">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="FormValidation - The best jQuery validation plugin to validate form fields, support Bootstrap, Zurb Foundation, Pure, Semantic, UIKit frameworks">
<meta name="keywords" content="FormValidation, BootstrapValidator, form validation, form validate, form validator, jQuery validation plugin, jquery validate plugin, jquery validator plugin, Zurb Foundation validation, Pure validation, SemanticUI validation, UIKit validation, Skeleton validation, Bootstrap, Zurb Foundation, Pure, SemanticUI, UIKit, Skeleton">
<meta name="author" content="Nguyen Huu Phuoc">
<meta name="google-site-verification" content="FMmr8kYuIuW27-qJLOb1Z59OgiVgKNgAv4_eMARhIY8" />

<meta name="twitter:site" content="@formvalidation" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:description" content="FormValidation - The best jQuery validation plugin to validate form fields, support Bootstrap, Zurb Foundation, Pure, Semantic, UIKit frameworks" />
<meta name="twitter:title" content="Validating percentage values - FormValidation" />
<meta name="twitter:image" content="http://formvalidation.io/asset/img/logo.png" />

<meta property="og:title" content="Validating percentage values - FormValidation" />
<meta property="og:description" content="FormValidation - The best jQuery validation plugin to validate form fields, support Bootstrap, Zurb Foundation, Pure, Semantic, UIKit frameworks" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://formvalidation.io/examples/validating-percentage-values/bootstrap-slider/bootstrap.html" />
<meta property="og:image" content="http://formvalidation.io/asset/img/logo.png" />
<meta property="og:site_name" content="FormValidation" />

<link rel="icon" type="image/x-icon" href="/asset/img/favicon.ico">
<link rel="stylesheet" href="//cdn.jsdelivr.net/fontawesome/4.2.0/css/font-awesome.min.css">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">

<!--[if lt IE 9]>
<script src="//cdn.jsdelivr.net/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="//cdn.jsdelivr.net/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-44786951-2']);
_gaq.push(['_trackPageview']);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>


    <link rel="stylesheet" href="//cdn.jsdelivr.net/bootstrap/3.3.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/vendor/formvalidation/css/formValidation.min.css">
    <link rel="stylesheet" href="/asset/css/demo.css">

    <script src="//cdn.jsdelivr.net/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <script src="/vendor/formvalidation/js/formValidation.min.js"></script>
    <script src="/vendor/formvalidation/js/framework/bootstrap.min.js"></script>
</head>
<body class="demo-bootstrap">
    <div class="container">
        <div class="row">
            <div class="col-xs-12" id="demoContainer">
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/4.10.0/css/bootstrap-slider.min.css" />
<style type="text/css">
/*
Adjust feedback icon position:
http://formvalidation.io/examples/adjusting-feedback-icon-position/
*/
#sumForm .sliderContainer .form-control-feedback {
    top: -6px;
}
</style>

<form id="sumForm" method="post" class="form-horizontal">
    <div class="form-group">
        <label class="col-xs-3 control-label">Percentages</label>
        <div class="col-xs-5 sliderContainer">
            <input class="form-control" name="percentage[]" type="text" value="0" />
        </div>
        <div class="col-xs-3">
            <span class="percentageValue">0%</span>
        </div>
    </div>

    <div class="form-group">
        <div class="col-xs-5 col-xs-offset-3 sliderContainer">
            <input class="form-control" name="percentage[]" type="text" value="0" />
        </div>
        <div class="col-xs-3">
            <span class="percentageValue">0%</span>
        </div>
    </div>

    <div class="form-group">
        <div class="col-xs-5 col-xs-offset-3 sliderContainer">
            <input class="form-control" name="percentage[]" type="text" value="0" />
        </div>
        <div class="col-xs-3">
            <span class="percentageValue">0%</span>
        </div>
    </div>

    <div class="form-group">
        <div class="col-xs-5 col-xs-offset-3 sliderContainer">
            <input class="form-control" name="percentage[]" type="text" value="0" />
        </div>
        <div class="col-xs-3">
            <span class="percentageValue">0%</span>
        </div>
    </div>

    <div class="form-group">
        <div class="col-xs-9 col-xs-offset-3">
            <!-- The message container -->
            <div id="messageContainer"></div>
        </div>
    </div>

    <div class="form-group">
        <div class="col-xs-9 col-xs-offset-3">
            <button type="submit" class="btn btn-primary">Validate</button>
        </div>
    </div>
</form>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/4.10.0/bootstrap-slider.min.js"></script>
<script>
$(document).ready(function() {
    $('#sumForm')
        .find('[name="percentage[]"]')
            .each(function() {
                $(this)
                    // Create a slider
                    .slider({
                        min: 0,
                        max: 100,
                        step: 1,
                        tooltip: 'hide'
                    })
                    // Triggered after dragging the slider
                    .on('slide', function(e) {
                        var $field = $(e.target);
                        $field
                            .closest('.form-group')
                                .find('.percentageValue')
                                .html($field.slider('getValue') + '%');

                        // Revalidate the field
                        $('#sumForm').formValidation('revalidateField', $field);
                    });
            })
            .end()
        .formValidation({
            framework: 'bootstrap',
            icon: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            excluded: ':disabled',
            fields: {
                'percentage[]': {
                    // Setting verbose to false ensures that
                    // the callback validator is only performed
                    // when the field already passes the between validator
                    verbose: false,
                    err: '#messageContainer',
                    validators: {
                        callback: {
                            message: 'The sum of percentages must be 100',
                            callback: function(value, validator, $field) {
                                var percentage = validator.getFieldElements('percentage[]'),
                                    length     = percentage.length,
                                    sum        = 0;

                                for (var i = 0; i < length; i++) {
                                    sum += parseInt($(percentage[i]).val(), 10);
                                    console.log(parseInt($(percentage[i]).val(), 10), sum);
                                }
                                if (sum === 100) {
                                    validator.updateStatus('percentage[]', 'VALID', 'callback');
                                    return true;
                                }

                                return false;
                            }
                        }
                    }
                }
            }
        });
});
</script>
            </div>
        </div>
    </div>

<script>
// You don't need to care about the following code
// It's built for all demos
$(document).ready(function() {
    $('form').on('success.form.fv', function(e) {
        e.preventDefault();
    });

    $(window).on('load', function() {
        var $iframe = $(window.parent.document).find('iframe[src="/examples/validating-percentage-values/bootstrap-slider/bootstrap.html"]');
        if ($iframe.length) {
            //$('body').addClass('demo-frame-body').find('.demo-ad').hide();

            // Adjust the height of iframes containing the demo for specific frameworks
            var $container = $('#demoContainer');
            setTimeout(function() {
                $iframe.height($container.height()).css('visibility', 'visible').fadeIn('fast');
            }, 1000);

            // Set the internal data to get it later if I want
            $('body').data('iframe.fv', $iframe);

            $container
                .find('form')
                .on('status.field.fv', function(e, data) {
                    $iframe.height($container.height());
                });
        }
    });
});
</script>
</body>
</html>